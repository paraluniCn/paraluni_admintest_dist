(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c2ad58c6"],{"0481":function(e,t,a){"use strict";var s=a("23e7"),n=a("a2bf"),r=a("7b0b"),o=a("07fa"),c=a("5926"),i=a("65f0");s({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=r(this),a=o(t),s=i(t,0);return s.length=n(s,t,t,a,0,void 0===e?1:c(e)),s}})},4069:function(e,t,a){var s=a("44d2");s("flat")},"76e7":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",["start"==e.status?a("el-card",{staticClass:"card-contain"},[a("div",{staticClass:"mb-10"},[e._v("创建审批流")]),a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"xxx","on-remove":e.handleRemove,"on-change":e.handleChange,"file-list":e.fileList,"auto-upload":!1,limit:1}},[a("el-button",{attrs:{slot:"trigger",type:"primary"},slot:"trigger"},[e._v("选取文件")]),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"success"},on:{click:e.submitUpload}},[e._v("创建审批流")])],1)],1):e._e(),"waiting"==e.status?a("el-card",{staticClass:"card-contain"},[a("div",{staticClass:"mb-10"},[e._v("审批（提交地址："+e._s(e.addressList.waitAddress)+"）")]),a("el-button",{attrs:{type:"primary"},on:{click:e.approveSuccess}},[e._v("审批通过")]),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"warning"},on:{click:e.approveFail}},[e._v("审批不通过")])],1):e._e(),"approved"==e.status?a("el-card",{staticClass:"card-contain"},[a("div",{staticClass:"mb-10"},[a("div",{staticClass:"mb-10"},[e._v("提交地址："+e._s(e.addressList.waitAddress))]),a("div",{staticClass:"mb-10"},[e._v("操作（审批地址："+e._s(e.addressList.approvedAddress)+"）")]),a("el-button",{attrs:{type:"warning"},on:{click:e.approveFail}},[e._v("取消发放，重新审批")])],1),a("div",{staticClass:"mb-10"},[e._v(" 选择发送的Token "),a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.changeToken},model:{value:e.chooseToken,callback:function(t){e.chooseToken=t},expression:"chooseToken"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e.chooseToken?a("div",{staticClass:"mb-10"},[e._v(" 可发放数量："+e._s(e.changeTokenValue)+" ")]):e._e(),e.chooseTokenApproved?e._e():a("el-button",{attrs:{type:"primary"},on:{click:e.approveToken}},[e._v("授权"+e._s(e.chooseToken)+"发放权限")]),e.chooseTokenApproved?a("el-button",{attrs:{type:"primary"},on:{click:e.payForUser}},[e._v("发放")]):e._e()],1):e._e(),e.list.length>0?a("el-card",{staticClass:"card-contain"},[a("div",{staticClass:"mb-10"},[e._v("发放总数："+e._s(e.allPay))]),a("div",[e._v("发放地址总数："+e._s(e.allAddressLength))]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list}},[a("el-table-column",{attrs:{prop:"address",label:"地址"}}),a("el-table-column",{attrs:{prop:"value",label:"数量"}})],1)],1):e._e()],1)},n=[],r=a("c7eb"),o=a("1da1"),c=a("5530"),i=(a("d3b7"),a("159b"),a("a9e3"),a("0481"),a("4069"),a("d81d"),a("07ac"),a("498a"),a("b680"),a("be53"),a("5d3f")),l=a("2f62"),u=a("2ef0"),d=a("25ca"),p=a("2934"),f=a("bed7"),b=a("e07e"),h=a("3de1"),v=a("bc3a"),m=a.n(v),k=a("6514"),g={name:"PUSDAdmin",data:function(){return{status:"start",addressList:{},fileList:[],list:[],allPay:0,allAddressLength:0,options:[{value:"USDT",label:"USDT"},{value:"V42",label:"V42"}],chooseToken:"",chooseTokenApproved:!1,changeTokenValue:0}},computed:Object(c["a"])({},Object(l["b"])(["userAddress"])),watch:{userAddress:{handler:function(){}}},components:{},mounted:function(){this.getStatus()},methods:{getStatus:function(){var e=this;return Object(o["a"])(Object(r["a"])().mark((function t(){var a;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,m.a.get("".concat(k["b"],"/get/status"));case 2:a=t.sent,200==a.status&&(e.status=Object(u["get"])(a,"data.status",""),e.list=Object(u["get"])(a,"data.list",[]),e.addressList=Object(u["get"])(a,"data.addressList",{}),e.allPay=0,e.allAddressLength=e.list.length,e.list.forEach((function(t){console.log(Number(t.value)),e.allPay+=Number(t.value)})));case 4:case"end":return t.stop()}}),t)})))()},uploadStatus:function(e,t){var a=arguments,s=this;return Object(o["a"])(Object(r["a"])().mark((function n(){var o,c;return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return o=a.length>2&&void 0!==a[2]?a[2]:{},n.next=3,m.a.post("".concat(k["b"],"/post/todo"),{status:e,list:t,addressList:o});case 3:c=n.sent,200==c.status&&s.getStatus();case 5:case"end":return n.stop()}}),n)})))()},submitUpload:function(){var e=this;return Object(o["a"])(Object(r["a"])().mark((function t(){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.uploadStatus("waiting",e.list,Object(c["a"])(Object(c["a"])({},e.addressList),{},{waitAddress:e.userAddress}));case 1:case"end":return t.stop()}}),t)})))()},handleRemove:function(e,t){this.list=[]},handleChange:function(e,t){var a=this;if(!Object(u["isEmpty"])(e)){var s=new FileReader;s.readAsBinaryString(e.raw),s.onload=function(e){var t=e.target.result,s=Object(d["a"])(t,{type:"binary"}),n=s.SheetNames[0],r=s.Sheets[n],o=d["b"].sheet_to_json(r,{header:2});o=o.flat(),a.list=o.map((function(e){return{address:"string"==typeof Object.values(e)[0]?Object.values(e)[0]:Object.values(e)[1],value:"number"==typeof Object.values(e)[1]?Object.values(e)[1]:Object.values(e)[0]}})),a.allPay=0,a.allAddressLength=a.list.length,a.list.forEach((function(e){a.allPay+=Number(e.value)}))}}},approveSuccess:function(){var e=this;return Object(o["a"])(Object(r["a"])().mark((function t(){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.uploadStatus("approved",e.list,Object(c["a"])(Object(c["a"])({},e.addressList),{},{approvedAddress:e.userAddress}));case 1:case"end":return t.stop()}}),t)})))()},approveFail:function(){var e=this;return Object(o["a"])(Object(r["a"])().mark((function t(){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.uploadStatus("start",[]);case 1:case"end":return t.stop()}}),t)})))()},changeToken:function(e){var t=this;return Object(o["a"])(Object(r["a"])().mark((function e(){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$loading(),t.chooseTokenApproved=!1,t.changeTokenValue=0,e.next=5,Object(p["a"])(i["a"][t.chooseToken],t.userAddress,i["a"].MultiPay,f["a"][t.chooseToken]);case 5:return t.chooseTokenApproved=e.sent,e.t0=h["a"],e.next=9,Object(p["b"])(i["a"][t.chooseToken],t.userAddress,f["a"][t.chooseToken]);case 9:e.t1=e.sent,t.changeTokenValue=(0,e.t0)(e.t1,6),t.$loading().close();case 12:case"end":return e.stop()}}),e)})))()},approveToken:function(){var e=this;return Object(o["a"])(Object(r["a"])().mark((function t(){var a;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.chooseToken){t.next=3;break}return e.$message.warning("请选择Token"),t.abrupt("return");case 3:return t.next=5,Object(b["a"])({abi:"erc20",address:i["a"][e.chooseToken],params:[i["a"].MultiPay,"0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"],method:"approve",type:"send"});case 5:a=t.sent,a&&(e.$message.success("授权成功"),e.chooseTokenApproved=!0);case 7:case"end":return t.stop()}}),t)})))()},payForUser:function(){var e=this;return Object(o["a"])(Object(r["a"])().mark((function t(){var a;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(b["a"])({abi:"MultiPay",address:i["a"].MultiPay,params:[i["a"][e.chooseToken],e.list.map((function(t){return[(t.address||"").trim(),Object(h["i"])(t.value||0,f["a"][e.chooseToken]).toFixed(0,1)]}))],method:"pay",type:"send"});case 2:a=t.sent,a&&(e.$message.success("发放成功"),e.uploadStatus("start",[]));case 4:case"end":return t.stop()}}),t)})))()}}},j=g,O=a("2877"),y=Object(O["a"])(j,s,n,!1,null,null,null);t["default"]=y.exports},a2bf:function(e,t,a){"use strict";var s=a("e8b5"),n=a("07fa"),r=a("3511"),o=a("0366"),c=function(e,t,a,i,l,u,d,p){var f,b,h=l,v=0,m=!!d&&o(d,p);while(v<i)v in a&&(f=m?m(a[v],v,t):a[v],u>0&&s(f)?(b=n(f),h=c(e,t,f,b,h,u-1)-1):(r(h+1),e[h]=f),h++),v++;return h};e.exports=c},be53:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-button",{staticClass:"mb-10",attrs:{type:"primary"},on:{click:e.getInfo}},[e._v("刷新数据")]),a("el-descriptions",{staticClass:"mb-20",attrs:{title:"执行分配费用(distributeFees)",direction:"vertical",border:"",column:2}},[a("template",{slot:"extra"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.goFunctione(e.allTokenList,"distributeFees")}}},[e._v("执行distributeFees方法")])],1),e._l(e.allTokenList,(function(t,s){return a("el-descriptions-item",{key:s,attrs:{label:"地址"+(s+1)}},[a("span",{staticClass:"mr-5"},[e._v(e._s(t.symbol))]),a("el-button",{attrs:{type:t.isChoose?"":"primary",size:"small"},on:{click:function(t){return e.changeChoose("allTokenList",s)}}},[e._v(e._s(t.isChoose?"已选择":"未选择"))])],1)}))],2),a("el-descriptions",{staticClass:"mb-20",attrs:{title:"执行移除流动资金(removeLiquidities)：",direction:"vertical",border:"",column:2}},[a("template",{slot:"extra"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.goFunctione(e.allLpToken,"removeLiquidities")}}},[e._v("执行removeLiquidities方法")])],1),e._l(e.allLpToken,(function(t,s){return a("el-descriptions-item",{key:s,attrs:{label:"地址"+(s+1)}},[a("span",{staticClass:"mr-5"},[e._v(e._s(t.showTips))]),a("el-button",{attrs:{type:t.isChoose?"":"primary",size:"small"},on:{click:function(t){return e.changeChoose("allLpToken",s)}}},[e._v(e._s(t.isChoose?"已选择":"未选择"))])],1)}))],2)],1)},n=[],r=a("2909"),o=a("c7eb"),c=a("1da1"),i=a("5530"),l=(a("99af"),a("d81d"),a("cb29"),a("4de4"),a("d3b7"),a("2f62")),u=a("5d3f"),d=a("3de1"),p=a("2ef0"),f=a("e07e"),b=a("291a"),h=a("6514"),v={name:"PusdPoolInfo",computed:Object(i["a"])({},Object(l["b"])(["userAddress"])),watch:{userAddress:{handler:function(){this.getInfo()}}},data:function(){return{allTokenList:[],allLpToken:[]}},mounted:function(){this.getInfo()},methods:{numFormat:function(e){return Object(d["a"])(Object(d["h"])(e),4)},getInfo:function(){var e=this;return Object(c["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.userAddress){t.next=2;break}return t.abrupt("return");case 2:e.getAllLpTokens(),e.getChooseTokenList();case 4:case"end":return t.stop()}}),t)})))()},getChooseTokenList:function(){var e=this;return Object(c["a"])(Object(o["a"])().mark((function t(){var a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(h["c"])();case 2:a=t.sent,e.allTokenList=[].concat(Object(r["a"])(Object(p["get"])(a,"tokenList",[]).map((function(e){return Object(i["a"])(Object(i["a"])({},e),{},{isChoose:!0,showTips:e.symbol})}))),[{address:u["a"].V42,symbol:"V42",decimal:18,isChoose:!0,img:"https://static.paraluni.org/images/Logos/logo-yellow@2x.png"},{address:u["a"].PUSD,symbol:"PUSD",decimal:18,isChoose:!0,img:"https://static.paraluni.org/images/products/USDT@2x.png"}]);case 4:case"end":return t.stop()}}),t)})))()},getAllLpTokens:function(){var e=this;return Object(c["a"])(Object(o["a"])().mark((function t(){var a,s,n;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(f["a"])({abi:"ParaFactory",address:u["a"].ParaFactory,method:"allPairsLength",params:[],type:"call"});case 2:return a=t.sent,s=new Array(parseInt(a)).fill(1),t.next=6,Object(b["a"])(s.map((function(e,t){return{abi:"ParaFactory",address:u["a"].ParaFactory,method:"allPairs",params:[t]}})));case 6:n=t.sent,e.allLpToken=n.map((function(e){var t="",a=e;return{address:a,showTips:Object(d["j"])(a),isChoose:!0,name:t}}));case 8:case"end":return t.stop()}}),t)})))()},changeChoose:function(e,t){this[e][t].isChoose=!this[e][t].isChoose},goFunctione:function(e,t){var a=this;return Object(c["a"])(Object(o["a"])().mark((function s(){var n,r,c,i;return Object(o["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:if("distributeFees"!==t){s.next=14;break}if(n=e.filter((function(e){return e.isChoose&&"BNB"!=e.isChoose})).map((function(e){return e.address})),0==n.length){s.next=11;break}return s.next=5,Object(f["a"])({abi:"FeeDistributor",address:u["a"].FeeDistributor,method:"distributeFees",params:[n],type:"send"});case 5:return s.next=7,s.sent;case 7:r=s.sent,r&&a.$message("执行成功"),s.next=12;break;case 11:a.$message("未选择token");case 12:s.next=25;break;case 14:if(c=e.filter((function(e){return e.isChoose})).map((function(e){return e.address})),0==c.length){s.next=24;break}return s.next=18,Object(f["a"])({abi:"devteamv2",address:u["a"].DevTeam,method:"removeLiquidities",params:[c],type:"send"});case 18:return s.next=20,s.sent;case 20:i=s.sent,i&&a.$message("执行成功"),s.next=25;break;case 24:a.$message("未选择token");case 25:case"end":return s.stop()}}),s)})))()}}},m=v,k=a("2877"),g=Object(k["a"])(m,s,n,!1,null,null,null);t["a"]=g.exports}}]);